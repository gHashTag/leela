{"version":3,"names":["auth_1","__importDefault","require","firestore_1","storage_1","mobx_1","Keychain","__importStar","i18n_1","helper_1","MessagingStore_1","_1","constants_1","helper_2","initProfile","firstName","lastName","email","intention","initHistory","createDate","Date","now","plan","count","status","exports","OnlinePlayer","makeAutoObservable","store","start","finish","stepTime","timeText","canGo","firstGame","loadingProf","history","isReported","avatar","profile","isPosterLoading","resetGame","_resetGame","_asyncToGenerator2","default","Object","assign","resetPlayer","resetHistory","updatePlan","DiceStore","online","err","captureException","apply","arguments","SignOut","_SignOut","_currentUser","userUid","currentUser","uid","getFireBaseRef","set","delTokenOnSignOut","actionsDice","resetInternetCredentials","signOut","actionSubscribeStore","resetStore","navigate","SignOutToOffline","_SignOutToOffline","getProfile","_getProfile","curProf","flagEmoji","lastStepTime","sort","a","b","slice","setMessage","t","getIMG","startGame","error","uploadImage","_uploadImage","image","getImagePicker","_currentUser2","_currentUser3","_currentUser4","fileName","uploadImg","prevImgUrl","photoURL","ref","delete","updateProfile","collection","doc","update","updateStep","_updateStep","upStepOnline","getLeftTime","lastTime","day","hour","min","sec","dateNow","passTime","difference","secCount","Math","round","minCount","hourCount","deleteUser","_deleteUser","_currentUser5","user","catch"],"sources":["/Users/playra/leela/src/store/OnlinePlayer.ts"],"sourcesContent":["import auth from '@react-native-firebase/auth'\nimport firestore from '@react-native-firebase/firestore'\nimport storage from '@react-native-firebase/storage'\nimport { makeAutoObservable } from 'mobx'\nimport * as Keychain from 'react-native-keychain'\nimport i18next from '../i18n'\n\nimport { upStepOnline } from './helper'\nimport { delTokenOnSignOut } from './MessagingStore'\n\nimport { DiceStore, actionSubscribeStore, actionsDice } from './'\nimport { captureException, navigate } from '../constants'\nimport {\n  getFireBaseRef,\n  getIMG,\n  getImagePicker,\n  getProfile,\n  resetHistory,\n  resetPlayer,\n  updatePlan,\n  uploadImg\n} from '../screens/helper'\nimport { HistoryT, statusT } from '../types'\n\nconst initProfile = {\n  firstName: '',\n  lastName: '',\n  email: '',\n  intention: ''\n}\n\nconst initHistory = () => [\n  {\n    createDate: Date.now(),\n    plan: 68,\n    count: 0,\n    status: 'start'\n  }\n]\n\nexport const OnlinePlayer = makeAutoObservable<Istore>({\n  store: {\n    start: false,\n    finish: false,\n    stepTime: 0,\n    timeText: ' ',\n    canGo: false,\n    plan: 68,\n    // addons\n    firstGame: false,\n    loadingProf: true,\n    history: initHistory(),\n    isReported: true,\n    avatar: '',\n    profile: initProfile,\n    isPosterLoading: false\n  },\n  async resetGame(): Promise<void> {\n    try {\n      OnlinePlayer.store = {\n        ...OnlinePlayer.store,\n        start: false,\n        finish: false,\n        plan: 68,\n        history: initHistory()\n      }\n      await resetPlayer()\n      await resetHistory()\n      await updatePlan(68)\n      DiceStore.online = false\n    } catch (err) {\n      captureException(err, 'resetGame')\n    }\n  },\n  async SignOut(): Promise<void> {\n    try {\n      const userUid = auth().currentUser?.uid\n      await getFireBaseRef(`/online/${userUid}`).set(false)\n      await delTokenOnSignOut()\n      OnlinePlayer.store = {\n        ...OnlinePlayer.store,\n        profile: initProfile,\n        avatar: '',\n        start: false,\n        finish: false,\n        plan: 68,\n        history: initHistory(),\n        canGo: false,\n        stepTime: 0,\n        timeText: ' ',\n        loadingProf: true\n      }\n      actionsDice.resetPlayer()\n      await Keychain.resetInternetCredentials('auth')\n      await auth().signOut()\n      actionSubscribeStore.resetStore()\n      DiceStore.online = false\n      navigate('HELLO')\n    } catch (err) {\n      captureException(err, 'SignOut')\n    }\n  },\n  async SignOutToOffline(): Promise<void> {\n    try {\n      OnlinePlayer.store = {\n        ...OnlinePlayer.store,\n        profile: initProfile,\n        avatar: '',\n        start: false,\n        finish: false,\n        plan: 68,\n        history: initHistory(),\n        canGo: false,\n        stepTime: 0,\n        timeText: ' ',\n        loadingProf: true\n      }\n      actionsDice.resetPlayer()\n      actionSubscribeStore.resetStore()\n      await auth().signOut()\n    } catch (err) {\n      captureException(err, 'SignOutToOffline')\n    }\n  },\n  async getProfile(): Promise<void> {\n    try {\n      OnlinePlayer.store.loadingProf = true\n      const curProf = await getProfile()\n      if (curProf) {\n        OnlinePlayer.store = {\n          ...OnlinePlayer.store,\n          plan: curProf.plan,\n          start: curProf.start,\n          finish: curProf.finish,\n          firstGame: curProf.firstGame,\n          profile: {\n            firstName: curProf.firstName,\n            lastName: curProf.lastName,\n            email: curProf.email,\n            intention: curProf.intention || ''\n          },\n          isReported: curProf.isReported,\n          flagEmoji: curProf.flagEmoji,\n          stepTime: curProf.lastStepTime,\n          canGo: Date.now() - curProf.lastStepTime >= 86400000,\n          status: curProf?.status,\n          history: curProf.history\n            .sort((a, b) => b.createDate - a.createDate)\n            .slice(0, 30)\n        }\n        if (curProf.plan === 68 && !curProf.finish) {\n          actionsDice.setMessage(i18next.t('sixToBegin'))\n        } else {\n          actionsDice.setMessage(' ')\n        }\n        OnlinePlayer.store.avatar = await getIMG(curProf.avatar)\n        DiceStore.startGame = curProf.start\n      }\n      OnlinePlayer.store.loadingProf = false\n    } catch (error) {\n      captureException(error, 'getProfile')\n    }\n  },\n  async uploadImage(): Promise<void> {\n    try {\n      const image = await getImagePicker()\n      if (image) {\n        try {\n          const fileName = await uploadImg(image)\n          const prevImgUrl = auth().currentUser?.photoURL\n          if (prevImgUrl) {\n            await storage().ref(prevImgUrl).delete()\n          }\n          await auth().currentUser?.updateProfile({\n            photoURL: fileName\n          })\n          await firestore()\n            .collection('Profiles')\n            .doc(auth().currentUser?.uid)\n            .update({\n              avatar: fileName\n            })\n          OnlinePlayer.store.avatar = await getIMG(fileName)\n        } catch (error) {\n          captureException(error, 'uploadImage')\n        }\n      }\n    } catch (error) {\n      captureException(error, 'uploadImage')\n    }\n  },\n  async updateStep(): Promise<void> {\n    upStepOnline()\n  },\n  getLeftTime(lastTime) {\n    const day = 86400000\n    const hour = 3600000\n    const min = 60000\n    const sec = 1000\n    const dateNow = Date.now()\n    const passTime = dateNow - lastTime\n    const difference = day - passTime\n\n    if (difference <= 0) {\n      return '0'\n    } else if (difference < min) {\n      const secCount = Math.round(difference / sec)\n      return `${secCount} ${i18next.t('timestamps-short.sec')}`\n    } else if (difference < hour) {\n      const minCount = Math.round(difference / min)\n      return `${minCount} ${i18next.t('timestamps-short.min')}`\n    } else {\n      const hourCount = Math.round(difference / hour)\n      return `${hourCount} ${i18next.t('timestamps-short.h')}`\n    }\n  },\n  async deleteUser() {\n    try {\n      const userUid = auth().currentUser?.uid\n      await getFireBaseRef(`/online/${userUid}`).set(false)\n      await delTokenOnSignOut()\n      let user = auth().currentUser\n      user === null\n        ? null\n        : user.delete().catch((error) => captureException(error, 'deleteUser'))\n      navigate('HELLO')\n    } catch (err) {\n      captureException(err, 'deleteUser')\n    }\n  }\n})\n\ninterface Istore {\n  store: OnlinePlayerStore\n  resetGame: () => Promise<void>\n  SignOut: () => Promise<void>\n  getProfile: () => Promise<void>\n  uploadImage: () => Promise<void>\n  updateStep: () => Promise<void>\n  SignOutToOffline: () => Promise<void>\n  getLeftTime: (lastTime: number) => string\n  deleteUser: () => Promise<void>\n}\n\ninterface OnlinePlayerStore {\n  // game\n  start: boolean\n  finish: boolean\n  stepTime: number\n  timeText: string\n  canGo: boolean\n  plan: number\n  // addons\n  firstGame: boolean\n  loadingProf: boolean\n  history: HistoryT[]\n  isReported: boolean\n  avatar: string\n  profile: {\n    firstName: string\n    lastName: string\n    email: string\n    intention: string\n  }\n  isPosterLoading: boolean\n  flagEmoji?: string\n  status?: statusT\n}\n"],"mappings":"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"}