{"version":3,"names":["async_storage_1","__importDefault","require","ONE_YEAR_IN_MS","exports","storageAdapter","getItem","_getItem","_asyncToGenerator2","default","key","item","JSON","parse","Date","now","timestamp","data","removeItem","_x","apply","arguments","setItem","_setItem","stringify","_x2","_x3","_removeItem","_x4","ttl"],"sources":["/Users/playra/leela/src/store/storageAdapter.ts"],"sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage'\n\ninterface StorageOptions {\n  ttl: number\n}\n\ninterface StorageAdapter extends StorageOptions {\n  getItem(key: string): Promise<any>\n  setItem(key: string, data: any): Promise<void>\n  removeItem(key: string): Promise<void>\n}\n\nconst ONE_YEAR_IN_MS = 365 * 24 * 60 * 60 * 1000 // milliseconds in a year\n\nexport const storageAdapter: StorageAdapter = {\n  getItem: async (key) => {\n    const item = JSON.parse((await AsyncStorage.getItem(key)) || '{}')\n    if (item && Date.now() - item.timestamp < ONE_YEAR_IN_MS) {\n      return item.data\n    }\n    await AsyncStorage.removeItem(key)\n    return null\n  },\n  setItem: async (key, data) => {\n    const item = {\n      timestamp: Date.now(),\n      data\n    }\n    AsyncStorage.setItem(key, JSON.stringify(item))\n  },\n  removeItem: async (key) => AsyncStorage.removeItem(key),\n  ttl: ONE_YEAR_IN_MS // время жизни данных в миллисекундах (1 год)\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,IAAAA,eAAA,GAAAC,eAAA,CAAAC,OAAA;AAYA,IAAMC,cAAc,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI;AAEnCC,OAAA,CAAAC,cAAc,GAAmB;EAC5CC,OAAO;IAAA,IAAAC,QAAA,OAAAC,kBAAA,CAAAC,OAAA,EAAE,WAAOC,GAAG,EAAI;MACrB,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAAC,OAAOb,eAAA,CAAAS,OAAY,CAACH,OAAO,CAACI,GAAG,CAAC,KAAK,IAAI,CAAC;MAClE,IAAIC,IAAI,IAAIG,IAAI,CAACC,GAAG,EAAE,GAAGJ,IAAI,CAACK,SAAS,GAAGb,cAAc,EAAE;QACxD,OAAOQ,IAAI,CAACM,IAAI;;MAElB,MAAMjB,eAAA,CAAAS,OAAY,CAACS,UAAU,CAACR,GAAG,CAAC;MAClC,OAAO,IAAI;IACb,CAAC;IAAA,SAAAJ,QAAAa,EAAA;MAAA,OAAAZ,QAAA,CAAAa,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAf,OAAA;EAAA;EACDgB,OAAO;IAAA,IAAAC,QAAA,OAAAf,kBAAA,CAAAC,OAAA,EAAE,WAAOC,GAAG,EAAEO,IAAI,EAAI;MAC3B,IAAMN,IAAI,GAAG;QACXK,SAAS,EAAEF,IAAI,CAACC,GAAG,EAAE;QACrBE,IAAI,EAAJA;OACD;MACDjB,eAAA,CAAAS,OAAY,CAACa,OAAO,CAACZ,GAAG,EAAEE,IAAI,CAACY,SAAS,CAACb,IAAI,CAAC,CAAC;IACjD,CAAC;IAAA,SAAAW,QAAAG,GAAA,EAAAC,GAAA;MAAA,OAAAH,QAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAC,OAAA;EAAA;EACDJ,UAAU;IAAA,IAAAS,WAAA,OAAAnB,kBAAA,CAAAC,OAAA,EAAE,WAAOC,GAAG;MAAA,OAAKV,eAAA,CAAAS,OAAY,CAACS,UAAU,CAACR,GAAG,CAAC;IAAA;IAAA,SAAAQ,WAAAU,GAAA;MAAA,OAAAD,WAAA,CAAAP,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAAH,UAAA;EAAA;EACvDW,GAAG,EAAE1B;CACN"}